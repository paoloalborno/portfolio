<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backlog</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div id="header-placeholder"></div>

    <main class="container">
        <section id="backlog" class="page-section animate-on-scroll">
            <h1 class="section-title" data-translate-key="backlog.title">Il Mio Backlog</h1>
            <div class="backlog-container">
                <div class="backlog-item" data-status="learning">
                    <div class="item-main-info">
                        <i class="fas fa-laptop-code"></i>
                        <span class="item-title" data-translate-key="backlog.langchain_title"></span>
                        <div class="tech-icons">
                            <img src="../assets/images/icons/Ollama.png" class="tech-icon small" alt="Ollama" class="tech-icon">
                            <img src="../assets/images/icons/Python.png" class="tech-icon small" alt="Python" class="tech-icon">
                        </div>
                        <span class="item-type tech" data-translate-key="backlog.type_tech"></span>
                        <span class="item-status learning" data-translate-key="backlog.status_learning"></span>
                    </div>
                    <div class="item-details">
                        <span class="item-dates" data-translate-key="backlog.dates_aug_oct"></span>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 30%;"></div>
                        </div>
                    </div>
                </div>
                <div class="backlog-item" data-status="developing">
                    <div class="item-main-info">
                        <i class="fas fa-project-diagram"></i>
                        <span class="item-title" data-translate-key="backlog.portfolio_title"></span>
                        <span class="item-type project" data-translate-key="backlog.type_project"></span>
                        <span class="item-status developing" data-translate-key="backlog.status_developing"></span>
                        <i class="fas fa-chevron-down expand-icon"></i>
                    </div>
                    <div class="item-details">
                        <span class="item-dates" data-translate-key="backlog.dates_jul_sep"></span>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 80%;"></div>
                        </div>
                    </div>
                    <div class="item-expandable-content">
                        <p class="item-description" data-translate-key="backlog.portfolio_description"></p>
                        <a href="projects.html" class="project-link" data-translate-key="backlog.project_link">View Project</a>
                    </div>
                </div>
                <div class="backlog-item" data-status="developing">
                    <div class="item-main-info">
                        <i class="fas fa-project-diagram"></i>
                        <span class="item-title" data-translate-key="backlog.portfolio_backend_title"></span>
                        <div class="tech-icons">
                            <img src="../assets/images/icons/Spring.png" class="tech-icon small" alt="Spring Boot" class="tech-icon">
                            <img src="../assets/images/icons/Render.png" class="tech-icon small" alt="Render" class="tech-icon">
                            <img src="../assets/images/icons/Docker.png" class="tech-icon small" alt="Docker" class="tech-icon">
                            <img src="../assets/images/icons/Firebase.png" class="tech-icon small" alt="Firebase" class="tech-icon">
                            <img src="../assets/images/icons/PostgresSQL.png" class="tech-icon small"  alt="PostgreSQL" class="tech-icon">
                        </div>
                        <span class="item-type project" data-translate-key="backlog.type_project"></span>
                        <span class="item-status developing" data-translate-key="backlog.status_developing"></span>
                        <i class="fas fa-chevron-down expand-icon"></i>
                    </div>
                    <div class="item-details">
                        <span class="item-dates" data-translate-key="backlog.dates_jul_sep"></span>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 10%;"></div>
                        </div>
                    </div>
                    <div class="item-expandable-content">
                        <p class="item-description" data-translate-key="backlog.portfolio_backend_description"></p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <!-- Scripts JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth-compat.js"></script>
    <script src="../assets/js/translations.js"></script>
    <script type="module" src="../assets/js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const backlogContainer = document.querySelector('.backlog-container');
            const storedItems = JSON.parse(localStorage.getItem('backlogItems')) || [];

            // Funzione per creare l'HTML di un item
            function createBacklogItemHTML(item) {
                const isFuture = item.status === 'future';
                const progressHTML = isFuture ? '' : `
                    <div class="progress-bar-container">
                        <div class="progress-bar" style="width: ${item.progress}%;"></div>
                    </div>`;

                // Aggiungi qui le icone corrette in base al tipo
                let iconClass = 'fas fa-question-circle';
                if (item.type === 'tech') iconClass = 'fas fa-laptop-code';
                if (item.type === 'project') iconClass = 'fas fa-project-diagram';
                if (item.type === 'course') iconClass = 'fas fa-book-open';

                return `
                    <div class="backlog-item ${isFuture ? 'future-goal' : ''}" data-status="${item.status}">
                        <div class="item-main-info">
                            <i class="${iconClass}"></i>
                            <span class="item-title">${item.title}</span>
                            <span class="item-type ${item.type}">${item.type}</span>
                            <span class="item-status ${item.status}">${item.status}</span>
                        </div>
                        <div class="item-details">
                            <span class="item-dates">${item.dates}</span>
                            ${progressHTML}
                        </div>
                    </div>
                `;
            }

            // Aggiungi gli item da localStorage
            if (storedItems.length > 0) {
                storedItems.forEach(item => {
                    const itemHTML = createBacklogItemHTML(item);
                    backlogContainer.insertAdjacentHTML('beforeend', itemHTML);
                });
            }
        });
    </script>
</body>
</html>
